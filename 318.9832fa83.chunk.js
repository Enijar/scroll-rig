"use strict";(self.webpackChunkscroll_rig=self.webpackChunkscroll_rig||[]).push([[318],{318:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(294),c=r(163);const o=c.ZP.div.withConfig({componentId:"sc-cnu2iy-0"})(["display:flex;height:100%;h2{text-align:center;line-height:1em;small{font-size:0.6em;}}"]),l=c.ZP.div.withConfig({componentId:"sc-cnu2iy-1"})(["height:100vh;color:#fefefe;margin-bottom:1em;margin-left:auto;margin-right:auto;:last-child{margin-bottom:0;}"]),s=c.ZP.div.withConfig({componentId:"sc-cnu2iy-2"})(["pointer-events:none;position:absolute;inset:0;width:100%;height:100%;"]),a=c.ZP.div.withConfig({componentId:"sc-cnu2iy-3"})(["position:absolute;top:0;left:0;width:100%;height:0.5em;background-color:#666;"]);var u=r(799),i=r(648),f=r(433);function h(){return n.createElement("group",null)}var d=r(882),g=r.p+"59c2010091e8f59c0b53e44e39694576.glb";function m(e){return e*(Math.PI/180)}function p({scrollState:e}){const t=n.useRef(null),r=(0,d.L)(g);return(0,i.xQ)((({clock:r})=>{null!==t.current&&e&&(t.current.rotation.y=m(360*-e.progress.y-90),t.current.rotation.x=m(-5*Math.cos(r.getElapsedTime()))+m(45),t.current.rotation.z=m(20*Math.sin(r.getElapsedTime())))})),n.createElement("group",{scale:10,ref:t},n.createElement("primitive",{object:r.scene}))}function w({scrollState:e}){return n.createElement(s,null,n.createElement(i.Xz,null,n.createElement(h,null),n.createElement(p,{scrollState:e}),n.createElement("ambientLight",null),n.createElement(f.c,null)))}function x(){const[e,t]=n.useState(null),r=n.useRef(),c=n.useRef([]),s=n.useCallback((e=>{t(e),r.current.style.width=100*e.progress.y+"%";const n=window.innerHeight;let o=0;for(const t of c.current){const{top:r}=t.getBoundingClientRect();if(t.style.color=`hsl(${360*o*e.progress.y}, 50%, 50%)`,r>=0&&r<=n){const e=(1-1/n*r+.5)/2;t.style.transform=`translate(-${45*e}%, 0%)`}o++}}),[]);return n.createElement(o,null,n.createElement(a,{ref:r}),n.createElement(u.Z,{onScrollUpdate:s},n.createElement(l,{ref:e=>c.current[0]=e},n.createElement("h2",null,"Welcome")),n.createElement(l,{ref:e=>c.current[1]=e},n.createElement("h2",null,"This is a Shoe")),n.createElement(l,{ref:e=>c.current[2]=e},n.createElement("h2",null,"Here's the Back")),n.createElement(l,{ref:e=>c.current[3]=e},n.createElement("h2",null,"And here's the font"))),n.createElement(w,{scrollState:e}))}},799:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(294),c=r(163);const o=c.ZP.div.withConfig({componentId:"sc-n9919g-0"})(["width:100%;height:100%;position:relative;"]),l=c.ZP.div.withConfig({componentId:"sc-n9919g-1"})(["will-change:transform;white-space:nowrap;"]),s=c.ZP.div.withConfig({componentId:"sc-n9919g-2"})(["will-change:transform;background-color:#c7c7c7;position:relative;min-height:2em;border-radius:2em;"]),a=c.ZP.div.withConfig({componentId:"sc-n9919g-3"})(["pointer-events:all;background-color:#fafafa;:hover{","{background-color:#878787;}}",""],s,(({axis:e,size:t})=>"x"===e?(0,c.iv)(["width:100%;height:",";margin-top:auto;padding-left:calc("," / 4);padding-right:calc("," / 4);","{min-height:calc(100% - ("," / 2));width:0;margin-top:auto;margin-bottom:auto;}"],t,t,t,s,t):(0,c.iv)(["height:100%;width:",";margin-left:auto;padding-top:calc("," / 4);padding-bottom:calc("," / 4);","{width:calc(100% - ("," / 2));height:0;margin-left:auto;margin-right:auto;}"],t,t,t,s,t))),u=c.ZP.div.withConfig({componentId:"sc-n9919g-4"})(["position:absolute;pointer-events:none;user-select:none;top:0;left:0;width:100%;height:100%;"]);function i(e,t,r){return Math.min(Math.max(e,t),r)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}const h={};function d({children:e,native:t=!1,scrollBarSize:r="15px",style:c=h,controlled:d=!1,onScrollUpdate:g,classNamePrefix:m="scroll-rig",...p},w){const x=n.useRef({down:!1,lastX:0,lastY:0,currentX:0,currentY:0}),y=n.useRef({maxScroll:{x:0,y:0},wrapperSize:{width:0,height:0},progress:{x:0,y:0},scroll:{x:0,y:0},isScrolling:!1,locked:!1}),v=n.useRef(null),E=n.useRef(null),S=n.useRef(null),b=n.useRef(null),$=n.useRef(null),L=n.useRef(null),k=n.useRef(null),M=n.useRef(!1),R=n.useCallback((()=>{const e=v.current,n=E.current,c=b.current,o=$.current,l=L.current,s=k.current;if(t)return;if(null===n)return;if(null===c)return;if(null===o)return;e.scrollTop=0,e.scrollLeft=0,y.current.wrapperSize.width=e.offsetWidth,y.current.wrapperSize.height=e.offsetHeight,y.current.maxScroll.x=Math.max(0,n.scrollWidth-e.offsetWidth),y.current.maxScroll.y=Math.max(0,n.scrollHeight-e.offsetHeight),c.style.display=0===y.current.maxScroll.x?"none":"flex",o.style.display=0===y.current.maxScroll.y?"none":"flex",y.current.maxScroll.x>0&&(l.style.left=100*y.current.progress.x+"%",l.style.transform=`translateX(${-100*y.current.progress.x}%)`,l.style.width=e.offsetWidth/(y.current.maxScroll.x+e.offsetWidth)*100+"%"),y.current.maxScroll.y>0&&(s.style.top=100*y.current.progress.y+"%",s.style.transform=`translateY(${-100*y.current.progress.y}%)`,s.style.height=e.offsetHeight/(y.current.maxScroll.y+e.offsetHeight)*100+"%"),c.style.transform=0===y.current.maxScroll.x?"none":`translateY(-${r})`,c.style.paddingRight=0===y.current.maxScroll.y?"0px":r,o.style.paddingBottom=0===y.current.maxScroll.x?`calc(${r} / 4)`:r,n.style.maxHeight=0===y.current.maxScroll.x?"unset":`calc(100% - ${r})`,n.style.maxWidth=0===y.current.maxScroll.y?"unset":`calc(100% - ${r})`;const a=y.current.wrapperSize.width*y.current.progress.x,u=y.current.wrapperSize.height*y.current.progress.y,i=y.current.maxScroll.y>0?r:"0px",f=y.current.maxScroll.x>0?r:"0px",h=0===y.current.maxScroll.x?"0px":`(${y.current.progress.x} * -100%) + ${a}px - ${i}`,d=0===y.current.maxScroll.y?"0px":`(${y.current.progress.y} * -100%) + ${u}px - ${f}`;n.style.transform=`translate3d(calc(${h}), calc(${d}), 0px)`,y.current.scroll.x=y.current.progress.x*y.current.maxScroll.x,y.current.scroll.y=y.current.progress.y*y.current.maxScroll.y,y.current.isScrolling&&(C.current&&C.current(y.current),null!==X.current&&X.current(y.current)),M.current||(M.current=!0,C.current&&C.current(y.current)),y.current.isScrolling=!1}),[d,t]),H=n.useCallback(((e,t,r,n)=>{const c=y.current;if(c.locked)return;const o=c.maxScroll.x,l=c.maxScroll.y,s=0===e?0:1/o*r*e,a=0===t?0:1/l*n*t;c.progress.x=i(c.progress.x+s,0,1),c.progress.y=i(c.progress.y+a,0,1),R()}),[]),C=n.useRef(g);n.useEffect((()=>{C.current=g}),[g]);const X=n.useRef(null),Y=n.useCallback((e=>{X.current=e}),[]);return n.useEffect((()=>{null!==w&&(w.current={update:R,onScroll:Y,state:y.current})}),[w,R,Y]),n.useEffect((()=>{const e=v.current;t&&(e.scrollLeft=(e.scrollWidth-e.offsetWidth)*y.current.progress.x,e.scrollTop=(e.scrollHeight-e.offsetHeight)*y.current.progress.y,R())}),[t,R]),n.useEffect((()=>{if(d)return;let e;return function t(){e=requestAnimationFrame(t),R()}(),()=>cancelAnimationFrame(e)}),[t,d,R]),function(e,t,r,c,o){n.useEffect((()=>{function n(n){if(c)return;if(null===r.current)return;const l=n.target,s=0===n.deltaX?0:Math.sign(n.deltaX),a=0===n.deltaY?0:Math.sign(n.deltaY),u=Math.abs(n.deltaX),i=Math.abs(n.deltaY);(l===r.current||l===t.current||t.current.contains(l))&&(e.current.isScrolling=!0,o(s,a,u,i))}return window.addEventListener("wheel",n),()=>{window.removeEventListener("wheel",n)}}),[c,o])}(y,v,E,t,H),function(e,t,r,c,o){n.useEffect((()=>{function n(e){if(null===t.current||null===r.current)return;const n=e.target;if(n===r.current||n===t.current||t.current.contains(n)){const{pageX:t,pageY:r}=e.touches[0]??{};c.current.down=!0,c.current.lastX=t,c.current.lastY=r}}function l(t){if(!c.current.down)return;const r=c.current,{pageX:n,pageY:l}=t.touches[0]??{};r.currentX=n,r.currentY=l;const s=r.lastX-r.currentX,a=r.lastY-r.currentY,u=0===s?0:Math.sign(s),i=0===a?0:Math.sign(a),f=Math.abs(s),h=Math.abs(a);e.current.isScrolling=!0,o(u,i,f,h),r.lastX=n,r.lastY=l}function s(){c.current.down=!1}return window.addEventListener("touchstart",n),window.addEventListener("touchmove",l),window.addEventListener("touchend",s),()=>{window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",s)}}),[o])}(y,v,E,x,H),function(e,t){n.useEffect((()=>{function r(r){if(r.metaKey){switch(r.key){case"ArrowRight":e.current.progress.x=1;break;case"ArrowLeft":e.current.progress.x=0;break;case"ArrowDown":e.current.progress.y=1;break;case"ArrowUp":e.current.progress.y=0}t()}}return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}}),[t])}(y,R),function(e,t,r,c){n.useEffect((()=>{function n(n){const o=t.current,l=r.current;if(null===o)return;if(null===l)return;const s=n.target,a=Math.max(0,(s.offsetLeft??0)-o.offsetWidth),u=Math.max(0,(s.offsetTop??0)-o.offsetHeight),f=l.offsetWidth-o.offsetWidth,h=l.offsetHeight-o.offsetHeight;a&&(e.current.progress.x=i(1/f*(a+s.offsetWidth),0,1),e.current.progress.x>=.99&&(e.current.progress.x=1)),u&&(e.current.progress.y=i(1/h*(u+s.offsetHeight),0,1),e.current.progress.y>=.99&&(e.current.progress.y=1)),c()}return window.addEventListener("focus",n,{capture:!0}),()=>{window.removeEventListener("focus",n,{capture:!0})}}),[c])}(y,v,E,R),function(e,t,r,c,o){n.useEffect((()=>{let n=!1,l=0,s=0,a=0,u=0;function f(e){n=!0,l=e.pageX-t.current.offsetLeft,s=e.pageY-t.current.offsetTop,a=Math.abs(l-r.current.offsetLeft),u=Math.abs(s-c.current.offsetTop)}r.current.addEventListener("mousedown",f),c.current.addEventListener("mousedown",f),window.addEventListener("mousemove",(function(l){if(!n)return;const s=l.pageX-t.current.offsetLeft-a,f=l.pageY-t.current.offsetTop-u,h=1/(t.current.offsetHeight-r.current.offsetWidth)*s,d=1/(t.current.offsetHeight-c.current.offsetHeight)*f;e.current.progress.x=i(h,0,1),e.current.progress.y=i(d,0,1),e.current.isScrolling=!0,o()})),window.addEventListener("mouseup",(function(){n=!1}))}),[o])}(y,v,L,k,R),n.createElement(o,f({},p,{ref:v,style:{overflow:t?"auto":"hidden"},className:m}),n.createElement(l,{className:`${m}-plane`,ref:E,style:{...c,transform:t?"none":void 0}},e),n.createElement(u,{className:`${m}-scroll-bars`,ref:S,size:r,style:{display:t?"none":void 0}},n.createElement(a,{className:`${m}-scroll-bar ${m}-scroll-bar-y`,axis:"y",size:r,ref:$},n.createElement(s,{className:`${m}-scroll-bar-handle ${m}-scroll-bar-handle-y`,ref:k})),n.createElement(a,{className:`${m}-scroll-bar ${m}-scroll-bar-x`,axis:"x",size:r,ref:b},n.createElement(s,{className:`${m}-scroll-bar-handle ${m}-scroll-bar-handle-x`,ref:L}))))}var g=n.forwardRef(d)}}]);
//# sourceMappingURL=318.9832fa83.chunk.js.map